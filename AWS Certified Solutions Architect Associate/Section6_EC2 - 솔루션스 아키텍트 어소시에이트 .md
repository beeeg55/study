# Section6. EC2 - 솔루션스 아키텍트 어소시에이트 레벨

Date: June 3, 2023

EIP

- Elastic ip 를 사용하면 인스턴스를 중지 후 다시시작해도 공용ipv4를 유지시킬수있음

EC2 배치그룹

- EC2인스턴스가 AWS인프라에 배치되는 방법을 제어하고자 할때 사용
- 총 3가지 전략
    - 클러스터
        - 단일 가용 영역 내(동일 az, 동일 랙)에서 지연 시간이 짧은 하드웨어 설정.
        - 높은성능제공이지만 위험
        - 활용: 빅데이터 잡, 실패해도되는 빠른 네트워크 필요한 애플리케이션
    - 분산배치그룹
        - 인스턴스가 다른 하드웨어에 분산.
        - 크리티컬 애플리케이션의 경우
        - 실패위험 최소화
        - 모두 다른 하드웨어에 EC2 배치
        - AZ당 **최대 7개로 제한**되는 단점(규모의 제한)
        - 활용: 가용성을 극대화하고 위험을 최소화하는 애플리케이션
    - 분할배치그룹
        - 여러 파티션에 인스턴스를 분할. 이 파티션은 가용 영역 내의 다양한 하드웨어 랙세트에 의존
        - 인스턴스가 분산은되어 있으나 다른 실패로 부터 격리되지않음
        - 각 파티션은 다른 오류 파티션과 격리
        - AZ당 최대 7개의 파티션. 총 100개까지도 인스턴스 가능(분산배치그룹와의 차이)
        - 활용: hdfs, hbase, cassandra, kakfa (다른 파티션을 인식하는 애플리케이션)
        - 

ENI ( Elastic Network Interface)

- VPC의 논리적 구성 요소이며 가상 네트워크 카드를 나타냄
- ENI는 EC2인스턴스가 네트워크에 액세스할 수 있게 해줌
- ec2 생성시 공용ip, 사설ip 하나씩을보유한 eni가 함께 생성
- EC2에 직접연결도 가능하고 EC2하나에 여러개의 ENI(보조 ENI)가 있어도 된다.
- EC2오류 발생 시 다른 EC2로 ENI를 이동시켜 장애조치에 유용한점도 있다
- 보조 ENI를 사용하면 프라이빗 ipv4주소를 더많이 활용할 수있고 네트워킹 작업도 수월
- 특정 AZ로 국한된다

ec2를 중지하면 EBS는 계속 유지중임. ec2를 종료해도 루트볼륨이 삭제되지 않았다면 EBS는 계속 유지중..

EC2 Hibernate(절전모드)

- EC2중지 시 RAM에 있던 인메모리 상태는 그대로 보존 → **인스턴스 부팅이 빨라짐**
- 보존하기 위해 RAM의 정보를 EBS애 저장
- 사례 : 오래 실행되는 프로세스를 갖고 있고 중지하지않을때, RAM상태를 저장하고 싶을때, 빠른 재부팅필요, 서비스 초기화가 시간을 많이 잡아먹을때
- 루트볼륨에 덤프된 RAM을 포함할만큼 충분한 용량 필요. 암호화 필요
- 모든 종류의 인스턴스에 사용 가능(온디맨드, 예약, 스팟 등)